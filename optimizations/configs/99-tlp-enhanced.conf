# Enhanced TLP configuration for ASUS Zenbook UX5401Z
# Intel i7-12700H (Alder Lake), Intel Iris Xe, MediaTek MT7922 WiFi
# Optimized for balanced productivity usage

# ============================================================
# CPU Power Management - Intel 12th Gen (Alder Lake)
# ============================================================

# CPU driver mode
CPU_DRIVER_OPMODE_ON_AC=active
CPU_DRIVER_OPMODE_ON_BAT=active

# CPU frequency governor
CPU_SCALING_GOVERNOR_ON_AC=performance
CPU_SCALING_GOVERNOR_ON_BAT=schedutil

# Energy Performance Preferences (EPP) - Alder Lake specific
CPU_ENERGY_PERF_POLICY_ON_AC=balance_performance
CPU_ENERGY_PERF_POLICY_ON_BAT=balance_power

# Turbo Boost
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=0

# HWP (Hardware P-State) dynamic boost
CPU_HWP_DYN_BOOST_ON_AC=1
CPU_HWP_DYN_BOOST_ON_BAT=0

# Minimum/Maximum CPU frequency (in GHz)
CPU_MIN_PERF_ON_AC=0
CPU_MAX_PERF_ON_AC=100
CPU_MIN_PERF_ON_BAT=0
CPU_MAX_PERF_ON_BAT=60

# ============================================================
# Intel GPU Optimizations - Iris Xe (Alder Lake-P)
# ============================================================

# Intel GPU boost frequency (0 = default/auto)
INTEL_GPU_BOOST_FREQ_ON_AC=0
INTEL_GPU_BOOST_FREQ_ON_BAT=0

# Intel GPU power limits
INTEL_GPU_MAX_FREQ_ON_AC=0
INTEL_GPU_MAX_FREQ_ON_BAT=0

# ============================================================
# Platform Profiles (ACPI)
# ============================================================

PLATFORM_PROFILE_ON_AC=performance
PLATFORM_PROFILE_ON_BAT=balanced

# ============================================================
# Battery Care - OLED Protection
# ============================================================

# Charge thresholds for battery longevity (75-80% optimal)
START_CHARGE_THRESH_BAT0=75
STOP_CHARGE_THRESH_BAT0=80

# ============================================================
# Runtime Power Management
# ============================================================

# USB autosuspend
USB_AUTOSUSPEND=1

# PCI runtime power management
RUNTIME_PM_ON_AC=auto
RUNTIME_PM_ON_BAT=auto

# Exclude specific devices from runtime PM (if needed)
# RUNTIME_PM_DENYLIST="11:22:33:44:55:66"

# ============================================================
# Disk Power Management
# ============================================================

# NVMe power management (0 = max performance, 1 = balanced, 2 = max savings)
DISK_DEVICES="nvme0n1"
DISK_APM_LEVEL_ON_BAT=128

# Disk idle time on battery (seconds)
DISK_IDLE_SECS_ON_BAT=10

# ============================================================
# Network Power Management
# ============================================================

# WiFi power save mode
WIFI_PWR_ON_BAT=on
WIFI_PWR_ON_AC=off

# Wake-on-LAN
WOL_DISABLE=y

# ============================================================
# Audio Power Management
# ============================================================

# Audio codec power saving on battery
SOUND_POWER_SAVE_ON_BAT=1
SOUND_POWER_SAVE_CONTROLLER=y

# ============================================================
# Link Power Management
# ============================================================

# SATA link power management
SATA_LINKPWR_ON_BAT=max_performance

# PCIe link power management
LINK_PERSISTENT_ON_BAT=1

# ============================================================
# Kernel Tuning
# ============================================================

# Disable Bluetooth on battery
DEVICES_TO_DISABLE_ON_BAT="bluetooth"

# Restore devices when on AC
DEVICES_TO_ENABLE_ON_AC="bluetooth"
